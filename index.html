<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="page_title">ERR0REK - Osobista Wizytówka</title>
    <link rel="stylesheet" href="Style/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&family=Michroma&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <video autoplay muted loop id="background-video">
        <source src="obrazy/cyberpunk.mp4" type="video/mp4">
        Twój przeglądarka nie obsługuje tagu wideo.
    </video>

    <header>
        <a href="#" class="logo">ERR0REK</a>
        <nav>
            <ul>
                <li><a href="index.html" class="active" data-i18n="nav_home">Strona Główna</a></li>
                <li><a href="fav-games.html" data-i18n="nav_fav_games">Ulubione Gry</a></li>
                <li><a href="projects.html" data-i18n="nav_projects">Projekty</a></li>
                <li><a href="membership.html" data-i18n="nav_membership">Członkostwo</a></li>
            </ul>
        </nav>
        <div class="header-widgets">
            <div id="current-time" class="time-widget"></div>
            <div class="language-dropdown">
                <button class="dropbtn" id="current-language">PL <i class="fas fa-caret-down"></i></button>
                <div class="dropdown-content">
                    <a href="#" data-lang="pl" class="lang-option active">Polski</a>
                    <a href="#" data-lang="en" class="lang-option">English</a>
                    <a href="#" data-lang="cs" class="lang-option">Čeština</a>
                    <a href="#" data-lang="sk" class="lang-option">Slovenčina</a>
                    <a href="#" data-lang="de" class="lang-option">Deutsch</a>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <section id="hero-section">
            <div class="hero-content">
                <img src="obrazy/pfp1.png" alt="Awatar ERR0RKA" class="avatar" id="avatar-image">
                <h1 class="nickname" data-i18n="home_greeting">Cześć, nazywam się <span>ERR0R/Macio</span></h1>
                <p class="dynamic-text"></p>

                <div class="social-discord-container">
                    <div class="social-icons">
                        <a href="https://www.guilded.gg/profile/mb3YnkRA" target="_blank" class="social-icon"><i class="fa-brands fa-guilded"></i></a>
                        <a href="https://www.tiktok.com/@macio_pl16yt" target="_blank" class="social-icon"><i class="fa-brands fa-tiktok"></i></a>
                        <a href="https://x.com/indstrctible_pl" target="_blank" class="social-icon"><i class="fa-brands fa-x-twitter"></i></a>
                    </div>
                    <div class="discord-tag-widget">
                        <i class="fab fa-discord discord-logo-icon"></i>
                        <span class="discord-username">polonia.errorglitchtv</span>
                    </div>
                </div>
            </div>
        </section>

        <div class="info-sections-wrapper">
            <section id="about-section">
                <h2 data-i18n="info_heading">Podstawowe informacje</h2>
                <div class="info-grid">
                    <div class="info-item full-width">
                        <p data-i18n="info_intro">Pochodzę z Polski, mam 17 lat i interesuję się językami obcymi takimi jak:</p>
                        <ul>
                            <li data-i18n="lang_slavic"><strong>Języki Słowiańskie</strong></li>
                            <li data-i18n="lang_german"><strong>Język Niemiecki</strong></li>
                            <li data-i18n="lang_english"><strong>Język Angielski</strong></li>
                        </ul>
                    </div>
                    <div class="info-item full-width">
                        <p data-i18n="info_programming">Interesuję się też programowaniem (znam trochę C++ i JavaScript).</p>
                    </div>
                </div>
            </section>

            <section id="additional-info-section">
                <h2 data-i18n="additional_info">Dodatkowe Informacje</h2>
                <div class="info-grid">
                    <div class="info-item full-width">
                        <p data-i18n="info_owner_neo">Jestem właścicielem / twórcą N.E.O (Nowa Elitarna Organizacja)</p>
                    </div>
                    <div class="info-item full-width">
                        <p data-i18n="info_roblox">Zacząłem grać w Robloxa w 2019 roku...</p>
                    </div>
                    <div class="info-item full-width">
                        <p data-i18n="info_technology">Interesuję się nowoczesną technologią.</p>
                    </div>
                    <div class="info-item full-width">
                        <p data-i18n="politics_view">Jestem narodowcem, konserwatystą i patriotą.</p>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <p>&copy; ERR0REK. <span data-i18n="all_rights_reserved">Wszystkie prawa zastrzeżone.</span></p>
        </div>
    </footer>

    <script src="Skrypty/translate.js"></script>
    <script>
        // Dynamiczny tekst na stronie głównej
        const dynamicTextElement = document.querySelector('.dynamic-text');
        const dynamicPhrases = {
            pl: [
                "Jestem... Liderem N.E.O.",
                "Jestem... Weteranem MadCity.",
                "Jestem... patriotą i konserwatystą."
            ],
            en: [
                "I am... the Leader of N.E.O.",
                "I am... a MadCity Veteran.",
                "I am... a patriot and conservative."
            ],
            cs: [
                "Jsem... Lídr N.E.O.",
                "Jsem... Veterán MadCity.",
                "Jsem... vlastenec a konzervativec."
            ],
            sk: [
                "Som... Líder N.E.O.",
                "Som... Veterán MadCity.",
                "Som... vlastenec a konzervatívec."
            ],
            de: [
                "Ich bin... der Anführer von N.E.O.",
                "Ich bin... ein MadCity-Veteran.",
                "Ich bin... ein Patriot und Konservativer."
            ]
        };
        let phraseIndex = 0;
        let currentLang = localStorage.getItem('lang') || 'pl';
        let dynamicTextInterval; // Zmienna do przechowywania ID interwału

        function updateDynamicText() {
            const phrases = dynamicPhrases[currentLang];
            if (!phrases || phrases.length === 0) return;

            // Dodajemy klasę do animacji zanikania
            dynamicTextElement.classList.add('fade-out-text');

            setTimeout(() => {
                dynamicTextElement.innerText = phrases[phraseIndex];
                phraseIndex = (phraseIndex + 1) % phrases.length;
                // Usuwamy klasę zanikania i dodajemy klasę pojawiania się
                dynamicTextElement.classList.remove('fade-out-text');
                dynamicTextElement.classList.add('fade-in-text');

                // Usuwamy klasę pojawiania się po zakończeniu animacji, aby mogła być ponownie aktywowana
                setTimeout(() => {
                    dynamicTextElement.classList.remove('fade-in-text');
                }, 500); // Ten czas powinien być równy czasowi trwania animacji fade-in-text
            }, 500); // Ten czas powinien być równy czasowi trwania animacji fade-out-text
        }

        function startDynamicTextInterval() {
            if (dynamicTextInterval) {
                clearInterval(dynamicTextInterval); // Wyczyść poprzedni interwał, jeśli istnieje
            }
            updateDynamicText(); // Wyświetl pierwszy tekst od razu
            dynamicTextInterval = setInterval(updateDynamicText, 3000); // Uruchom interwał
        }

        // Uruchomienie dynamicznego tekstu po załadowaniu DOM
        document.addEventListener('DOMContentLoaded', () => {
            if (dynamicTextElement) {
                startDynamicTextInterval();
            }
        });

        // --- Obsługa Dropdowna Języka ---
        const dropbtn = document.getElementById('current-language');
        const dropdownContent = document.querySelector('.dropdown-content');
        const langOptions = document.querySelectorAll('.lang-option');

        function updateDropbtnText(lang) {
            const langTextMap = {
                pl: 'PL',
                en: 'EN',
                cs: 'CS',
                sk: 'SK',
                de: 'DE'
            };
            dropbtn.innerHTML = `${langTextMap[lang]} <i class="fas fa-caret-down"></i>`;
        }

        // Aktualizacja tekstu przycisku języka po załadowaniu DOM
        document.addEventListener('DOMContentLoaded', () => {
            currentLang = localStorage.getItem('lang') || 'pl';
            updateDropbtnText(currentLang);
        });

        // Nasłuchiwanie na niestandardowe zdarzenie zmiany języka (z translate.js)
        document.addEventListener('languageChanged', (event) => {
            currentLang = event.detail.lang;
            phraseIndex = 0; // Zresetuj indeks frazy przy zmianie języka dla dynamicznego tekstu
            startDynamicTextInterval(); // Uruchom ponownie interwał dynamicznego tekstu
            updateDropbtnText(currentLang); // Aktualizuj tekst przycisku języka
        });

        dropbtn.addEventListener('click', (event) => {
            dropdownContent.classList.toggle('show');
            event.stopPropagation();
        });

        langOptions.forEach(option => {
            option.addEventListener('click', (event) => {
                event.preventDefault();
                const newLang = option.dataset.lang;
                if (newLang !== currentLang) {
                    currentLang = newLang;
                    localStorage.setItem('lang', newLang);
                    langOptions.forEach(opt => opt.classList.remove('active'));
                    option.classList.add('active');

                    if (typeof translatePage === 'function') {
                        translatePage(newLang);
                    } else {
                        document.dispatchEvent(new CustomEvent('languageChanged', { detail: { lang: newLang } }));
                    }
                    updateDropbtnText(newLang);
                    dropdownContent.classList.remove('show');
                }
            });
        });

        window.addEventListener('click', (event) => {
            if (!event.target.matches('.dropbtn') && !event.target.matches('.dropdown-content') && !event.target.closest('.dropdown-content')) {
                if (dropdownContent.classList.contains('show')) {
                    dropdownContent.classList.remove('show');
                }
            }
        });

        // Obsługa zegara
        function updateClock() {
            const now = new Date();
            const options = {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false,
                timeZone: 'Europe/Warsaw'
            };
            const timeString = now.toLocaleTimeString('pl-PL', options);

            const timezoneOffset = now.getTimezoneOffset();
            const isCEST = (timezoneOffset === -120);
            const timezoneAbbr = isCEST ? 'CEST' : 'CET';

            document.getElementById('current-time').innerText = `${timeString} ${timezoneAbbr}`;
        }

        updateClock();
        setInterval(updateClock, 1000);

        // --- Kod dla zmieniającego się PFP ---
        const avatarImage = document.getElementById('avatar-image');
        const pfpImages = [
            "Obrazy/ZdjęciaPfp/pfp1.png",
            "Obrazy/ZdjęciaPfp/pfp2.png",
            "Obrazy/ZdjęciaPfp/pfp3.png"
        ];
        let currentPfpIndex = 0;

        function changePfp() {
            avatarImage.classList.add('fade-out');

            setTimeout(() => {
                currentPfpIndex = (currentPfpIndex + 1) % pfpImages.length;
                avatarImage.src = pfpImages[currentPfpIndex];
                avatarImage.classList.remove('fade-out');
                avatarImage.classList.add('fade-in');

                setTimeout(() => {
                    avatarImage.classList.remove('fade-in');
                }, 500); // Czas musi być równy lub dłuższy niż czas trwania animacji fade-in
            }, 500); // Czas musi być równy czasowi trwania animacji fade-out
        }

        setInterval(changePfp, 5000);
    </script>
</body>
</html>